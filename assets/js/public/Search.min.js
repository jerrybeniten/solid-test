class Search{constructor(e,t,i){this.searchInput=e,this.searchService=t,this.resultsContainer=i,this.init()}init(){let e=null;this.searchInput.addEventListener("input",t=>{let i=t.target.value;!(i.length<3)&&(clearTimeout(e),e=setTimeout(()=>{this.handleSearch(i)},300))})}async handleSearch(e){try{let t=await this.searchService.search(e);this.displayResults(t,e)}catch(i){console.error(i),this.displayResults([])}}displayResults(e,t){if(this.resultsContainer.innerHTML="",0===e.length||void 0===e.length){let i=document.createElement("div");i.className="book-item",i.innerHTML=`                    
    <div class="result" role="listitem" aria-labelledby="book-title">
        <div aria-label="Author Name:">
                No results for search term: ${t}
        </div>
    </div>`,this.resultsContainer.appendChild(i),i.querySelector(".result").classList.add("visible")}else{let l=e.map(e=>{let t=document.createElement("div");return t.className="book-item",t.innerHTML=`                    
    <div class="result" role="listitem" aria-labelledby="book-title">
        <div class="author" aria-label="Author Name: ${e.author_name}">
            ${e.author_name}
        </div>
        <div class="title" id="book-title" aria-label="Book Title: ${e.book_title}">
            ${e.book_title??"(no books found)"}
        </div>
    </div>`,this.resultsContainer.appendChild(t),t}),s=0;l.forEach((e,t)=>{setTimeout(()=>{e.querySelector(".result").classList.add("visible")},s),s+=300})}}}